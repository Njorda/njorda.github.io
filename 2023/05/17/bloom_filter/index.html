<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Bloom filters - Njord tech blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Bloom filters is a probabilistic data structure, which is space efficient. Bloom filters can be used to quickly check if a value don&rsquo;t exists or might exists in a set, false positives are possible(with a low likelihood) but false negatives are not possible. The time to check if an element exsist or add an element is also constant O(k), where k is the number of hash functions(we will covert this later)."><meta property="og:image" content><meta property="og:title" content="Bloom filters"><meta property="og:description" content="Bloom filters is a probabilistic data structure, which is space efficient. Bloom filters can be used to quickly check if a value don&rsquo;t exists or might exists in a set, false positives are possible(with a low likelihood) but false negatives are not possible. The time to check if an element exsist or add an element is also constant O(k), where k is the number of hash functions(we will covert this later)."><meta property="og:type" content="article"><meta property="og:url" content="https://www.njordy.com/2023/05/17/bloom_filter/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-18T00:00:00+00:00"><meta property="article:modified_time" content="2023-05-18T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Bloom filters"><meta name=twitter:description content="Bloom filters is a probabilistic data structure, which is space efficient. Bloom filters can be used to quickly check if a value don&rsquo;t exists or might exists in a set, false positives are possible(with a low likelihood) but false negatives are not possible. The time to check if an element exsist or add an element is also constant O(k), where k is the number of hash functions(we will covert this later)."><link href=https://www.njordy.com/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://www.njordy.com/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css></head><body><div class=content><header><div class=main><a href=https://www.njordy.com/>Njord tech blog</a></div><nav><a href=../../../../>Home</a>
<a href=../../../../posts>All posts</a>
<a href=../../../../about>About</a></nav></header><main><article><div class=title><h1 class=title>Bloom filters</h1><div class=meta>Posted on May 18, 2023</div></div><section class=body><p>Bloom filters is a probabilistic data structure, which is space efficient. Bloom filters can be used to quickly check if a value don&rsquo;t exists or might exists in a set, false positives are possible(with a low likelihood) but false negatives are not possible. The time to check if an element exsist or add an element is also constant O(k), where k is the number of hash functions(we will covert this later).</p><h2 id=how-does-it-works>How does it works?</h2><p>Bloom filters build upon <code>k</code> hash functions and an bit array of length <code>m</code>. Each value is hashed <code>k</code> times, where each hash is converted to a position in the bit array, and these bits are set to positive(if they are already positive they are not swapped). In order to check if a value exists it is hashed using the <code>k</code> hashing functions, if all the bits are set to 1 the value exists(or we have a false positive).</p><p>Example:</p><p>$$
x = &ldquo;Thomas&rdquo; \
f^1(x) = 79 \
f^2(x) = 1 \
f^k(x) = 1000 \
$$</p><p>The bits are set to 1 for each of the hash values.</p><h2 id=implementation>Implementation</h2><p>The implementation is done in GO in this case, in this case I implemented it as a struct with three methods:</p><ul><li>hash(Not exported) - for hashing the input values</li><li>Add(exported) - adding a value to the bit map</li><li>Check(exported) - check if a value exists in the filter</li></ul><p>The struct is defined as:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>bloom</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>hashes</span>               <span style=color:#66d9ef>int</span> <span style=color:#75715e>// nbr of hash functions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>maxVal</span>               <span style=color:#66d9ef>uint64</span> <span style=color:#75715e>// the length of the bit array(bool array in this case)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>hashDifferentiations</span> []<span style=color:#66d9ef>string</span> <span style=color:#75715e>// trick to create n hash functions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>h</span>                    <span style=color:#a6e22e>hash</span>.<span style=color:#a6e22e>Hash</span> <span style=color:#75715e>// the base hash functions
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>bloomFilter</span>          []<span style=color:#66d9ef>bool</span> <span style=color:#75715e>// the &#34;bit array&#34; which stores the hash values
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>to initialize a bloom filter a <code>New</code> function is created also to avoid having to export the struct it self.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>New</span>(<span style=color:#a6e22e>hashes</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>cardinality</span> <span style=color:#66d9ef>uint64</span>) <span style=color:#f92672>*</span><span style=color:#a6e22e>bloom</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>bloomFilter</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>bool</span>{}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; int(<span style=color:#a6e22e>cardinality</span>); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>bloomFilter</span> = append(<span style=color:#a6e22e>bloomFilter</span>, <span style=color:#66d9ef>false</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>bloom</span>{
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>hashes</span>:               <span style=color:#a6e22e>hashes</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>maxVal</span>:               <span style=color:#a6e22e>cardinality</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>hashDifferentiations</span>: []<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;a&#34;</span>, <span style=color:#e6db74>&#34;b&#34;</span>, <span style=color:#e6db74>&#34;c &#34;</span>, <span style=color:#e6db74>&#34;d&#34;</span>, <span style=color:#e6db74>&#34;e&#34;</span>, <span style=color:#e6db74>&#34;f&#34;</span>, <span style=color:#e6db74>&#34;g&#34;</span>, <span style=color:#e6db74>&#34;h&#34;</span>, <span style=color:#e6db74>&#34;i&#34;</span>, <span style=color:#e6db74>&#34;j&#34;</span>},
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>h</span>:                    <span style=color:#a6e22e>sha1</span>.<span style=color:#a6e22e>New</span>(),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>bloomFilter</span>:          <span style=color:#a6e22e>bloomFilter</span>,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The key for a bloom filter is the hash function in this case I emulate <code>k</code> hash function by making changes to the input in a deterministic way using the <code>hashDifferentiations</code>, in this case the upper limit of <code>k</code> is <code>len(hashDifferentiations)</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>bloom</span>) <span style=color:#a6e22e>hash</span>(<span style=color:#a6e22e>input</span> []<span style=color:#66d9ef>byte</span>) ([]<span style=color:#66d9ef>uint64</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Reset</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>out</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>uint64</span>{}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>hashes</span> &gt; len(<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>hashDifferentiations</span>) {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;max hashes is: %v&#34;</span>, len(<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>hashDifferentiations</span>))
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>hashes</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Write</span>(append(<span style=color:#a6e22e>input</span>, []byte(<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>hashDifferentiations</span>[<span style=color:#a6e22e>i</span>])<span style=color:#f92672>...</span>))
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>, <span style=color:#a6e22e>err</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>out</span> = append(<span style=color:#a6e22e>out</span>, <span style=color:#a6e22e>binary</span>.<span style=color:#a6e22e>BigEndian</span>.<span style=color:#a6e22e>Uint64</span>(<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>Sum</span>(<span style=color:#66d9ef>nil</span>))<span style=color:#f92672>%</span><span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>maxVal</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>out</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>the <code>hash</code> function is never exported byt used internally inside <code>Add</code> and <code>check</code>. The function to add values to the bloom filters is:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>bloom</span>) <span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>input</span> []<span style=color:#66d9ef>byte</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>hashes</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>hash</span>(<span style=color:#a6e22e>input</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;hash: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>idx</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>hashes</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>bloomFilter</span>[<span style=color:#a6e22e>idx</span>] = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The bit map is emulated as a bool slice(since we don&rsquo;t know the size are compile time). The final function of interest is the function to check if a value exists(false positives are positive).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>bloom</span>) <span style=color:#a6e22e>Check</span>(<span style=color:#a6e22e>input</span> []<span style=color:#66d9ef>byte</span>) (<span style=color:#66d9ef>bool</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>hashes</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>hash</span>(<span style=color:#a6e22e>input</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;hash: %w&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>idx</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>hashes</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> !<span style=color:#a6e22e>b</span>.<span style=color:#a6e22e>bloomFilter</span>[<span style=color:#a6e22e>idx</span>] {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The more values we add to the bloom filter the higher is the chance that we get a false positive. Since more and more of the bits in the bit array are positive.</p><p>Some tests:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestNew</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NotNil</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>New</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10</span>))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestHash</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;Single hash&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>bloom</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>New</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10000</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>bloom</span>.<span style=color:#a6e22e>Add</span>([]byte(<span style=color:#e6db74>&#34;Test1&#34;</span>)))
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;Multiple hashes hash&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>bloom</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>New</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10000</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>bloom</span>.<span style=color:#a6e22e>Add</span>([]byte(<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;Test%v&#34;</span>, <span style=color:#a6e22e>i</span>))))
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>TestCheck</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;Single hash&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>bloom</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>New</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10000</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>val</span> <span style=color:#f92672>:=</span> []byte(<span style=color:#e6db74>&#34;Test1&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>bloom</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>val</span>))
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>exsist</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>bloom</span>.<span style=color:#a6e22e>Check</span>(<span style=color:#a6e22e>val</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>True</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>exsist</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;Multiple hashes hash&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>testing</span>.<span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>bloom</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>New</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>10000</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>val</span> <span style=color:#f92672>:=</span> []byte(<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;Test%v&#34;</span>, <span style=color:#a6e22e>i</span>))
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>bloom</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>val</span>))
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>exsist</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>bloom</span>.<span style=color:#a6e22e>Check</span>(<span style=color:#a6e22e>val</span>)
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>True</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>exsist</span>)
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>exsist</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>bloom</span>.<span style=color:#a6e22e>Check</span>(append(<span style=color:#a6e22e>val</span>, []byte(<span style=color:#e6db74>&#34;n&#34;</span>)<span style=color:#f92672>...</span>))
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>NoError</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>assert</span>.<span style=color:#a6e22e>False</span>(<span style=color:#a6e22e>t</span>, <span style=color:#a6e22e>exsist</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></section><div class=post-tags></div></article></main><footer><div style=display:flex></div><div class=footer-info>2024 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer></div></body></html>